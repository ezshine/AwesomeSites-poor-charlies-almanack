(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{3337:function(e,t,n){var o,r;void 0!==(r="function"==typeof(o=function(){var e,t,n="object",o="undefined",r=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],a=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],i=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],s=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function isHostMethod(e,t){var o=typeof e[t];return"function"==o||!!(o==n&&e[t])||"unknown"==o}function isHostObject(e,t){return!!(typeof e[t]==n&&e[t])}function isHostProperty(e,t){return typeof e[t]!=o}function createMultiplePropertyTest(e){return function(t,n){for(var o=n.length;o--;)if(!e(t,n[o]))return!1;return!0}}var c=createMultiplePropertyTest(isHostMethod),d=createMultiplePropertyTest(isHostObject),l=createMultiplePropertyTest(isHostProperty);function isTextRange(e){return e&&c(e,s)&&l(e,i)}function getBody(e){return isHostObject(e,"body")?e.body:e.getElementsByTagName("body")[0]}var u=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,o=e.length;n<o;++n)t(e[n],n)},f={},g=typeof window!=o&&typeof document!=o,h={isHostMethod:isHostMethod,isHostObject:isHostObject,isHostProperty:isHostProperty,areHostMethods:c,areHostObjects:d,areHostProperties:l,isTextRange:isTextRange,getBody:getBody,forEach:u},p={version:"1.3.1",initialized:!1,isBrowser:g,supported:!0,util:h,features:{},modules:f,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==o||rangyAutoInitialize}};function consoleLog(e){typeof console!=o&&isHostMethod(console,"log")&&console.log(e)}function alertOrLog(e,t){g&&t?alert(e):consoleLog(e)}function fail(e){p.initialized=!0,p.supported=!1,alertOrLog("Rangy is not supported in this environment. Reason: "+e,p.config.alertOnFail)}function warn(e){alertOrLog("Rangy warning: "+e,p.config.alertOnWarn)}p.fail=fail,p.warn=warn,({}).hasOwnProperty?(h.extend=e=function(t,n,o){var r,a;for(var i in n)n.hasOwnProperty(i)&&(r=t[i],a=n[i],o&&null!==r&&"object"==typeof r&&null!==a&&"object"==typeof a&&e(r,a,!0),t[i]=a);return n.hasOwnProperty("toString")&&(t.toString=n.toString),t},h.createOptions=function(t,n){var o={};return e(o,n),t&&e(o,t),o}):fail("hasOwnProperty not supported"),g||fail("Rangy can only run in a browser"),function(){var e;if(g){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,o=e.length;n<o;++n)t[n]=e[n];return t}),h.toArray=e}(),g&&(isHostMethod(document,"addEventListener")?t=function(e,t,n){e.addEventListener(t,n,!1)}:isHostMethod(document,"attachEvent")?t=function(e,t,n){e.attachEvent("on"+t,n)}:fail("Document does not have required addEventListener or attachEvent method"),h.addListener=t);var m=[];function getErrorDesc(e){return e.message||e.description||String(e)}function init(){if(g&&!p.initialized){var e,t,n=!1,o=!1;isHostMethod(document,"createRange")&&c(e=document.createRange(),a)&&l(e,r)&&(n=!0);var i=getBody(document);if(!i||"body"!=i.nodeName.toLowerCase()){fail("No body element found");return}if(i&&isHostMethod(i,"createTextRange")&&isTextRange(e=i.createTextRange())&&(o=!0),!n&&!o){fail("Neither Range nor TextRange are available");return}for(var s in p.initialized=!0,p.features={implementsDomRange:n,implementsTextRange:o},f)(t=f[s])instanceof Module&&t.init(t,p);for(var d=0,u=m.length;d<u;++d)try{m[d](p)}catch(e){consoleLog("Rangy init listener threw an exception. Continuing. Detail: "+getErrorDesc(e))}}}function deprecationNotice(e,t,n){n&&(e+=" in module "+n.name),p.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function createAliasForDeprecatedMethod(e,t,n,o){e[t]=function(){return deprecationNotice(t,n,o),e[n].apply(e,h.toArray(arguments))}}h.deprecationNotice=deprecationNotice,h.createAliasForDeprecatedMethod=createAliasForDeprecatedMethod,p.init=init,p.addInitListener=function(e){p.initialized?e(p):m.push(e)};var R=[];function shim(e){e=e||window,init();for(var t=0,n=R.length;t<n;++t)R[t](e)}function Module(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function createModule(e,t,n){var o=new Module(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(p,t),t.supported=!0}catch(t){consoleLog("Module '"+e+"' failed to load: "+getErrorDesc(t)),t.stack&&consoleLog(t.stack)}}});return f[e]=o,o}function RangePrototype(){}function SelectionPrototype(){}p.addShimListener=function(e){R.push(e)},g&&(p.shim=p.createMissingNativeApi=shim,createAliasForDeprecatedMethod(p,"createMissingNativeApi","shim")),Module.prototype={init:function(){for(var e,t,n=this.dependencies||[],o=0,r=n.length;o<r;++o){if(!(e=f[t=n[o]])||!(e instanceof Module))throw Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,Error(e)},warn:function(e){p.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){p.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return Error("Error in Rangy "+this.name+" module: "+e)}},p.createModule=function(e){2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var t,n,o=createModule(e,n,t);p.initialized&&p.supported&&o.init()},p.createCoreModule=function(e,t,n){createModule(e,t,n)},p.RangePrototype=RangePrototype,p.rangePrototype=new RangePrototype,p.selectionPrototype=new SelectionPrototype,p.createCoreModule("DomUtil",[],function(e,t){var n,o,r,a="undefined",i=e.util,s=i.getBody;i.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),i.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var c=document.createElement("div");i.areHostMethods(c,["insertBefore","appendChild","cloneNode"])||t.fail("Incomplete Element implementation"),i.isHostProperty(c,"innerHTML")||t.fail("Element is missing innerHTML property");var d=document.createTextNode("test");i.areHostMethods(d,["splitText","deleteData","insertData","appendData","cloneNode"])||t.fail("Incomplete Text Node implementation");var arrayContains=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1};function isHtmlNamespace(e){var t;return typeof e.namespaceURI==a||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function parentElement(e){var t=e.parentNode;return 1==t.nodeType?t:null}function getNodeIndex(e){for(var t=0;e=e.previousSibling;)++t;return t}function getNodeLength(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function getCommonAncestor(e,t){var n,o=[];for(n=e;n;n=n.parentNode)o.push(n);for(n=t;n;n=n.parentNode)if(arrayContains(o,n))return n;return null}function isAncestorOf(e,t,n){for(var o=n?t:t.parentNode;o;){if(o===e)return!0;o=o.parentNode}return!1}function isOrIsAncestorOf(e,t){return isAncestorOf(e,t,!0)}function getClosestAncestorIn(e,t,n){for(var o,r=n?e:e.parentNode;r;){if((o=r.parentNode)===t)return r;r=o}return null}function isCharacterDataNode(e){var t=e.nodeType;return 3==t||4==t||8==t}function isTextOrCommentNode(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function insertAfter(e,t){var n=t.nextSibling,o=t.parentNode;return n?o.insertBefore(e,n):o.appendChild(e),e}function splitDataNode(e,t,n){var o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),insertAfter(o,e),n)for(var r,a=0;r=n[a++];)r.node==e&&r.offset>t?(r.node=o,r.offset-=t):r.node==e.parentNode&&r.offset>getNodeIndex(e)&&++r.offset;return o}function getDocument(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=a)return e.ownerDocument;if(typeof e.document!=a)return e.document;if(e.parentNode)return getDocument(e.parentNode);throw t.createError("getDocument: no document found for node")}function getWindow(e){var n=getDocument(e);if(typeof n.defaultView!=a)return n.defaultView;if(typeof n.parentWindow!=a)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function getIframeDocument(e){if(typeof e.contentDocument!=a)return e.contentDocument;if(typeof e.contentWindow!=a)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function getIframeWindow(e){if(typeof e.contentWindow!=a)return e.contentWindow;if(typeof e.contentDocument!=a)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function isWindow(e){return e&&i.isHostMethod(e,"setTimeout")&&i.isHostObject(e,"document")}function getContentDocument(e,t,n){var o;if(e?i.isHostProperty(e,"nodeType")?o=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?getIframeDocument(e):getDocument(e):isWindow(e)&&(o=e.document):o=document,!o)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return o}function getRootContainer(e){for(var t;t=e.parentNode;)e=t;return e}function comparePoints(e,n,o,r){var a,i,s,c,d;if(e==o)return n===r?0:n<r?-1:1;if(a=getClosestAncestorIn(o,e,!0))return n<=getNodeIndex(a)?-1:1;if(a=getClosestAncestorIn(e,o,!0))return getNodeIndex(a)<r?-1:1;if(!(i=getCommonAncestor(e,o)))throw Error("comparePoints error: nodes have no common ancestor");if((s=e===i?i:getClosestAncestorIn(e,i,!0))===(c=o===i?i:getClosestAncestorIn(o,i,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(d=i.firstChild;d;){if(d===s)return -1;if(d===c)return 1;d=d.nextSibling}}var l=!1;function isBrokenNode(e){try{return e.parentNode,!1}catch(e){return!0}}function inspectNode(e){if(!e)return"[No node]";if(l&&isBrokenNode(e))return"[Broken node]";if(isCharacterDataNode(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+getNodeIndex(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function fragmentFromNodeChildren(e){for(var t,n=getDocument(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function createTestElement(e,t,n){var o=s(e),r=e.createElement("div");r.contentEditable=""+!!n,t&&(r.innerHTML=t);var a=o.firstChild;return a?o.insertBefore(r,a):o.appendChild(r),r}function removeNode(e){return e.parentNode.removeChild(e)}function NodeIterator(e){this.root=e,this._next=e}function createIterator(e){return new NodeIterator(e)}function DomPosition(e,t){this.node=e,this.offset=t}function DOMException(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}(n=document.createElement("b")).innerHTML="1",o=n.firstChild,n.innerHTML="<br />",l=isBrokenNode(o),e.features.crashyTextNodes=l,typeof window.getComputedStyle!=a?r=function(e,t){return getWindow(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=a?r=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),NodeIterator.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current){if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}}return this._current},detach:function(){this._current=this._next=this.root=null}},DomPosition.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+inspectNode(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},DOMException.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},DOMException.prototype.toString=function(){return this.message},e.dom={arrayContains:arrayContains,isHtmlNamespace:isHtmlNamespace,parentElement:parentElement,getNodeIndex:getNodeIndex,getNodeLength:getNodeLength,getCommonAncestor:getCommonAncestor,isAncestorOf:isAncestorOf,isOrIsAncestorOf:isOrIsAncestorOf,getClosestAncestorIn:getClosestAncestorIn,isCharacterDataNode:isCharacterDataNode,isTextOrCommentNode:isTextOrCommentNode,insertAfter:insertAfter,splitDataNode:splitDataNode,getDocument:getDocument,getWindow:getWindow,getIframeWindow:getIframeWindow,getIframeDocument:getIframeDocument,getBody:s,isWindow:isWindow,getContentDocument:getContentDocument,getRootContainer:getRootContainer,comparePoints:comparePoints,isBrokenNode:isBrokenNode,inspectNode:inspectNode,getComputedStyleProperty:r,createTestElement:createTestElement,removeNode:removeNode,fragmentFromNodeChildren:fragmentFromNodeChildren,createIterator:createIterator,DomPosition:DomPosition},e.DOMException=DOMException}),p.createCoreModule("DomRange",["DomUtil"],function(e,t){var n=e.dom,o=e.util,r=n.DomPosition,a=e.DOMException,i=n.isCharacterDataNode,s=n.getNodeIndex,c=n.isOrIsAncestorOf,d=n.getDocument,l=n.comparePoints,u=n.splitDataNode,f=n.getClosestAncestorIn,g=n.getNodeLength,h=n.arrayContains,p=n.getRootContainer,m=e.features.crashyTextNodes,R=n.removeNode;function isNonTextPartiallySelected(e,t){return 3!=e.nodeType&&(c(e,t.startContainer)||c(e,t.endContainer))}function getRangeDocument(e){return e.document||d(e.startContainer)}function getRangeRoot(e){return p(e.startContainer)}function getBoundaryBeforeNode(e){return new r(e.parentNode,s(e))}function getBoundaryAfterNode(e){return new r(e.parentNode,s(e)+1)}function insertNodeAtPosition(e,t,o){var r=11==e.nodeType?e.firstChild:e;return i(t)?o==t.length?n.insertAfter(e,t):t.parentNode.insertBefore(e,0==o?t:u(t,o)):o>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[o]),r}function rangesIntersect(e,t,n){if(assertRangeValid(e),assertRangeValid(t),getRangeDocument(t)!=getRangeDocument(e))throw new a("WRONG_DOCUMENT_ERR");var o=l(e.startContainer,e.startOffset,t.endContainer,t.endOffset),r=l(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?o<=0&&r>=0:o<0&&r>0}function cloneSubtree(e){for(var t,n,o,r=getRangeDocument(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(o=e.getSubtreeIterator(),n.appendChild(cloneSubtree(o)),o.detach()),10==n.nodeType)throw new a("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function iterateSubtree(e,t,o){var r,a,i,s;for(o=o||{stop:!1};i=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(i)){o.stop=!0;return}if(iterateSubtree(s=e.getSubtreeIterator(),t,o),s.detach(),o.stop)return}else for(r=n.createIterator(i);a=r.next();)if(!1===t(a)){o.stop=!0;return}}function deleteSubtree(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(deleteSubtree(t=e.getSubtreeIterator()),t.detach()):e.remove()}function extractSubtree(e){for(var t,n,o=getRangeDocument(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(extractSubtree(n)),n.detach()):e.remove(),10==t.nodeType)throw new a("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function getNodesInRange(e,t,n){var o,r=!!(t&&t.length),a=!!n;r&&(o=RegExp("^("+t.join("|")+")$"));var s=[];return iterateSubtree(new RangeIterator(e,!1),function(t){if((!r||o.test(t.nodeType))&&(!a||n(t))){var c=e.startContainer;if(!(t==c&&i(c))||e.startOffset!=c.length){var d=e.endContainer;t==d&&i(d)&&0==e.endOffset||s.push(t)}}}),s}function inspect(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+n.inspectNode(e.startContainer)+":"+e.startOffset+", "+n.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function RangeIterator(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&i(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||i(this.sc)?f(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||i(this.ec)?f(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}RangeIterator.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,i(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;i(n)&&(n===this.sc||n===this.ec)?(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e):n.parentNode&&R(n)},isPartiallySelectedSubtree:function(){return isNonTextPartiallySelected(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new Range(getRangeDocument(this.range));var t=this._current,n=t,o=0,r=t,a=g(t);c(t,this.sc)&&(n=this.sc,o=this.so),c(t,this.ec)&&(r=this.ec,a=this.eo),updateBoundaries(e,n,o,r,a)}return new RangeIterator(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var N=[1,3,4,5,7,8,10],v=[2,9,11],C=[1,3,4,5,7,8,10,11],S=[1,3,4,5,7,8];function createAncestorFinder(e){return function(t,n){for(var o=n?t:t.parentNode;o;){if(h(e,o.nodeType))return o;o=o.parentNode}return null}}var y=createAncestorFinder([9,11]),E=createAncestorFinder([5,6,10,12]),T=createAncestorFinder([6,10,12]),O=createAncestorFinder([1]);function assertNoDocTypeNotationEntityAncestor(e,t){if(T(e,t))throw new a("INVALID_NODE_TYPE_ERR")}function assertValidNodeType(e,t){if(!h(t,e.nodeType))throw new a("INVALID_NODE_TYPE_ERR")}function assertValidOffset(e,t){if(t<0||t>(i(e)?e.length:e.childNodes.length))throw new a("INDEX_SIZE_ERR")}function assertSameDocumentOrFragment(e,t){if(y(e,!0)!==y(t,!0))throw new a("WRONG_DOCUMENT_ERR")}function assertNodeNotReadOnly(e){if(E(e,!0))throw new a("NO_MODIFICATION_ALLOWED_ERR")}function assertNode(e,t){if(!e)throw new a(t)}function isValidOffset(e,t){return t<=(i(e)?e.length:e.childNodes.length)}function isRangeValid(e){return!!e.startContainer&&!!e.endContainer&&!(m&&(n.isBrokenNode(e.startContainer)||n.isBrokenNode(e.endContainer)))&&p(e.startContainer)==p(e.endContainer)&&isValidOffset(e.startContainer,e.startOffset)&&isValidOffset(e.endContainer,e.endOffset)}function assertRangeValid(e){if(!isRangeValid(e))throw Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}var w=document.createElement("style"),D=!1;try{w.innerHTML="<b>x</b>",D=3==w.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=D;var A=D?function(e){var t=this.startContainer,o=d(t);if(!t)throw new a("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:i(t)&&(r=n.parentElement(t)),(r=null===r||"HTML"==r.nodeName&&n.isHtmlNamespace(d(r).documentElement)&&n.isHtmlNamespace(r)?o.createElement("body"):r.cloneNode(!1)).innerHTML=e,n.fragmentFromNodeChildren(r)}:function(e){var t=getRangeDocument(this).createElement("body");return t.innerHTML=e,n.fragmentFromNodeChildren(t)};function splitRangeBoundaries(e,t){assertRangeValid(e);var n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset,c=n===r;i(r)&&a>0&&a<r.length&&u(r,a,t),i(n)&&o>0&&o<n.length&&(n=u(n,o,t),c?(a-=o,r=n):r==n.parentNode&&a>=s(n)&&a++,o=0),e.setStartAndEnd(n,o,r,a)}function rangeToHtml(e){assertRangeValid(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var x=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];function copyComparisonConstantsToObject(e){e.START_TO_START=0,e.START_TO_END=1,e.END_TO_END=2,e.END_TO_START=3,e.NODE_BEFORE=0,e.NODE_AFTER=1,e.NODE_BEFORE_AND_AFTER=2,e.NODE_INSIDE=3}function copyComparisonConstants(e){copyComparisonConstantsToObject(e),copyComparisonConstantsToObject(e.prototype)}function createRangeContentRemover(e,t){return function(){assertRangeValid(this);var n,o=this.startContainer,r=this.startOffset,a=this.commonAncestorContainer,i=new RangeIterator(this,!0);o!==a&&(o=(n=getBoundaryAfterNode(f(o,a,!0))).node,r=n.offset),iterateSubtree(i,assertNodeNotReadOnly),i.reset();var s=e(i);return i.detach(),t(this,o,r,o,r),s}}function createPrototypeRange(t,n){function createBeforeAfterNodeSetter(e,t){return function(n){assertValidNodeType(n,N),assertValidNodeType(p(n),v);var o=(e?getBoundaryBeforeNode:getBoundaryAfterNode)(n);(t?setRangeStart:setRangeEnd)(this,o.node,o.offset)}}function setRangeStart(e,t,o){var r=e.endContainer,a=e.endOffset;(t!==e.startContainer||o!==e.startOffset)&&((p(t)!=p(r)||1==l(t,o,r,a))&&(r=t,a=o),n(e,t,o,r,a))}function setRangeEnd(e,t,o){var r=e.startContainer,a=e.startOffset;(t!==e.endContainer||o!==e.endOffset)&&((p(t)!=p(r)||-1==l(t,o,r,a))&&(r=t,a=o),n(e,r,a,t,o))}var F=function(){};F.prototype=e.rangePrototype,t.prototype=new F,o.extend(t.prototype,{setStart:function(e,t){assertNoDocTypeNotationEntityAncestor(e,!0),assertValidOffset(e,t),setRangeStart(this,e,t)},setEnd:function(e,t){assertNoDocTypeNotationEntityAncestor(e,!0),assertValidOffset(e,t),setRangeEnd(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],o=e[1],r=t,a=o;switch(e.length){case 3:a=e[2];break;case 4:r=e[2],a=e[3]}assertNoDocTypeNotationEntityAncestor(t,!0),assertValidOffset(t,o),assertNoDocTypeNotationEntityAncestor(r,!0),assertValidOffset(r,a),n(this,t,o,r,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:createBeforeAfterNodeSetter(!0,!0),setStartAfter:createBeforeAfterNodeSetter(!1,!0),setEndBefore:createBeforeAfterNodeSetter(!0,!1),setEndAfter:createBeforeAfterNodeSetter(!1,!1),collapse:function(e){assertRangeValid(this),e?n(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):n(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){assertNoDocTypeNotationEntityAncestor(e,!0),n(this,e,0,e,g(e))},selectNode:function(e){assertNoDocTypeNotationEntityAncestor(e,!1),assertValidNodeType(e,N);var t=getBoundaryBeforeNode(e),o=getBoundaryAfterNode(e);n(this,t.node,t.offset,o.node,o.offset)},extractContents:createRangeContentRemover(extractSubtree,n),deleteContents:createRangeContentRemover(deleteSubtree,n),canSurroundContents:function(){assertRangeValid(this),assertNodeNotReadOnly(this.startContainer),assertNodeNotReadOnly(this.endContainer);var e=new RangeIterator(this,!0),t=e._first&&isNonTextPartiallySelected(e._first,this)||e._last&&isNonTextPartiallySelected(e._last,this);return e.detach(),!t},splitBoundaries:function(){splitRangeBoundaries(this)},splitBoundariesPreservingPositions:function(e){splitRangeBoundaries(this,e)},normalizeBoundaries:function(){assertRangeValid(this);var e,t=this.startContainer,o=this.startOffset,r=this.endContainer,a=this.endOffset,mergeForward=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(r=e,a=e.length,e.appendData(t.data),R(t))},mergeBackward=function(e){var n=e.previousSibling;if(n&&n.nodeType==e.nodeType){t=e;var i=e.length;if(o=n.length,e.insertData(0,n.data),R(n),t==r)a+=o,r=t;else if(r==e.parentNode){var c=s(e);a==c?(r=e,a=i):a>c&&a--}}},c=!0;if(i(r))a==r.length?mergeForward(r):0==a&&(e=r.previousSibling)&&e.nodeType==r.nodeType&&(a=e.length,t==r&&(c=!1),e.appendData(r.data),R(r),r=e);else{if(a>0){var d=r.childNodes[a-1];d&&i(d)&&mergeForward(d)}c=!this.collapsed}if(c){if(i(t))0==o?mergeBackward(t):o==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(r==e&&(r=t,a+=t.length),t.appendData(e.data),R(e));else if(o<t.childNodes.length){var l=t.childNodes[o];l&&i(l)&&mergeBackward(l)}}else t=r,o=a;n(this,t,o,r,a)},collapseToPoint:function(e,t){assertNoDocTypeNotationEntityAncestor(e,!0),assertValidOffset(e,t),this.setStartAndEnd(e,t)},parentElement:function(){return assertRangeValid(this),this.commonAncestorContainer?O(this.commonAncestorContainer,!0):null}}),copyComparisonConstants(t)}function updateCollapsedAndCommonAncestor(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:n.getCommonAncestor(e.startContainer,e.endContainer)}function updateBoundaries(e,t,o,r,a){e.startContainer=t,e.startOffset=o,e.endContainer=r,e.endOffset=a,e.document=n.getDocument(t),updateCollapsedAndCommonAncestor(e)}function Range(e){updateBoundaries(this,e,0,e,0)}o.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){assertRangeValid(this),assertSameDocumentOrFragment(this.startContainer,t.startContainer);var n,o=3==e||0==e?"start":"end",r=1==e||0==e?"start":"end";return n=this[o+"Container"],l(n,this[o+"Offset"],t[r+"Container"],t[r+"Offset"])},insertNode:function(e){if(assertRangeValid(this),assertValidNodeType(e,C),assertNodeNotReadOnly(this.startContainer),c(e,this.startContainer))throw new a("HIERARCHY_REQUEST_ERR");var t=insertNodeAtPosition(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){if(assertRangeValid(this),this.collapsed)return getRangeDocument(this).createDocumentFragment();if(this.startContainer===this.endContainer&&i(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=getRangeDocument(this).createDocumentFragment()).appendChild(e),t;var e,t,n=new RangeIterator(this,!0);return e=cloneSubtree(n),n.detach(),e},canSurroundContents:function(){assertRangeValid(this),assertNodeNotReadOnly(this.startContainer),assertNodeNotReadOnly(this.endContainer);var e=new RangeIterator(this,!0),t=e._first&&isNonTextPartiallySelected(e._first,this)||e._last&&isNonTextPartiallySelected(e._last,this);return e.detach(),!t},surroundContents:function(e){if(assertValidNodeType(e,S),!this.canSurroundContents())throw new a("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);insertNodeAtPosition(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){assertRangeValid(this);for(var e,t=new Range(getRangeDocument(this)),n=x.length;n--;)t[e=x[n]]=this[e];return t},toString:function(){assertRangeValid(this);var e=this.startContainer;if(e===this.endContainer&&i(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new RangeIterator(this,!0);return iterateSubtree(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){assertRangeValid(this);var t=e.parentNode,n=s(e);if(!t)throw new a("NOT_FOUND_ERR");var o=this.comparePoint(t,n),r=this.comparePoint(t,n+1);return o<0?r>0?2:0:r>0?1:3},comparePoint:function(e,t){return(assertRangeValid(this),assertNode(e,"HIERARCHY_REQUEST_ERR"),assertSameDocumentOrFragment(e,this.startContainer),0>l(e,t,this.startContainer,this.startOffset))?-1:l(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:A,toHtml:function(){return rangeToHtml(this)},intersectsNode:function(e,t){if(assertRangeValid(this),p(e)!=getRangeRoot(this))return!1;var n=e.parentNode,o=s(e);if(!n)return!0;var r=l(n,o,this.endContainer,this.endOffset),a=l(n,o+1,this.startContainer,this.startOffset);return t?r<=0&&a>=0:r<0&&a>0},isPointInRange:function(e,t){return assertRangeValid(this),assertNode(e,"HIERARCHY_REQUEST_ERR"),assertSameDocumentOrFragment(e,this.startContainer),l(e,t,this.startContainer,this.startOffset)>=0&&0>=l(e,t,this.endContainer,this.endOffset)},intersectsRange:function(e){return rangesIntersect(this,e,!1)},intersectsOrTouchesRange:function(e){return rangesIntersect(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=l(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=l(this.endContainer,this.endOffset,e.endContainer,e.endOffset),o=this.cloneRange();return -1==t&&o.setStart(e.startContainer,e.startOffset),1==n&&o.setEnd(e.endContainer,e.endOffset),o}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return -1==l(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==l(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new a("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):3==this.compareNode(e)},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&0>=this.comparePoint(e,g(e))},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(!(n.length>0))return this.containsNodeContents(e);t.setStart(n[0],0);var o=n.pop();return t.setEnd(o,o.length),this.containsRange(t)},getNodes:function(e,t){return assertRangeValid(this),getNodesInRange(this,e,t)},getDocument:function(){return getRangeDocument(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var o=getRangeDocument(this),r=e.createRange(o);t=t||n.getBody(o),r.selectNodeContents(t);var a=this.intersection(r),i=0,s=0;return a&&(r.setEnd(a.startContainer,a.startOffset),s=(i=r.toString().length)+a.toString().length),{start:i,end:s,containerNode:t}},moveToBookmark:function(e){var t,n,o,r=e.containerNode,a=0;this.setStart(r,0),this.collapse(!0);for(var i,s=[r],c=!1,d=!1;!d&&(i=s.pop());)if(3==i.nodeType)t=a+i.length,!c&&e.start>=a&&e.start<=t&&(this.setStart(i,e.start-a),c=!0),c&&e.end>=a&&e.end<=t&&(this.setEnd(i,e.end-a),d=!0),a=t;else for(n=(o=i.childNodes).length;n--;)s.push(o[n])},getName:function(){return"DomRange"},equals:function(e){return Range.rangesEqual(this,e)},isValid:function(){return isRangeValid(this)},inspect:function(){return inspect(this)},detach:function(){}}),createPrototypeRange(Range,updateBoundaries),o.extend(Range,{rangeProperties:x,RangeIterator:RangeIterator,copyComparisonConstants:copyComparisonConstants,createPrototypeRange:createPrototypeRange,inspect:inspect,toHtml:rangeToHtml,getRangeDocument:getRangeDocument,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=Range}),p.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,o,r=e.dom,a=e.util,i=r.DomPosition,s=e.DomRange,c=r.getBody,d=r.getContentDocument,l=r.isCharacterDataNode;if(e.features.implementsDomRange&&function(){var o,i,l=s.rangeProperties;function updateRangeProperties(e){for(var t,n=l.length;n--;)e[t=l[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function updateNativeRange(e,t,n,o,r){var a=e.startContainer!==t||e.startOffset!=n,i=e.endContainer!==o||e.endOffset!=r,s=!e.equals(e.nativeRange);(a||i||s)&&(e.setEnd(o,r),e.setStart(t,n))}n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,updateRangeProperties(this)},s.createPrototypeRange(n,updateNativeRange),(o=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),updateRangeProperties(this)},o.cloneContents=function(){return this.nativeRange.cloneContents()},o.surroundContents=function(e){this.nativeRange.surroundContents(e),updateRangeProperties(this)},o.collapse=function(e){this.nativeRange.collapse(e),updateRangeProperties(this)},o.cloneRange=function(){return new n(this.nativeRange.cloneRange())},o.refresh=function(){updateRangeProperties(this)},o.toString=function(){return this.nativeRange.toString()};var u=document.createTextNode("test");c(document).appendChild(u);var f=document.createRange();f.setStart(u,0),f.setEnd(u,0);try{f.setStart(u,1),o.setStart=function(e,t){this.nativeRange.setStart(e,t),updateRangeProperties(this)},o.setEnd=function(e,t){this.nativeRange.setEnd(e,t),updateRangeProperties(this)},i=function(e){return function(t){this.nativeRange[e](t),updateRangeProperties(this)}}}catch(e){o.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}updateRangeProperties(this)},o.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}updateRangeProperties(this)},i=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(o){this.nativeRange[t](n),this.nativeRange[e](n)}updateRangeProperties(this)}}}o.setStartBefore=i("setStartBefore","setEndBefore"),o.setStartAfter=i("setStartAfter","setEndAfter"),o.setEndBefore=i("setEndBefore","setStartBefore"),o.setEndAfter=i("setEndAfter","setStartAfter"),o.selectNodeContents=function(e){this.setStartAndEnd(e,0,r.getNodeLength(e))},f.selectNodeContents(u),f.setEnd(u,3);var g=document.createRange();g.selectNodeContents(u),g.setEnd(u,4),g.setStart(u,2),-1==f.compareBoundaryPoints(f.START_TO_END,g)&&1==f.compareBoundaryPoints(f.END_TO_START,g)?o.compareBoundaryPoints=function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:o.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var h=document.createElement("div");h.innerHTML="123";var p=h.firstChild,m=c(document);m.appendChild(h),f.setStart(p,1),f.setEnd(p,2),f.deleteContents(),"13"==p.data&&(o.deleteContents=function(){this.nativeRange.deleteContents(),updateRangeProperties(this)},o.extractContents=function(){var e=this.nativeRange.extractContents();return updateRangeProperties(this),e}),m.removeChild(h),m=null,a.isHostMethod(f,"createContextualFragment")&&(o.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),c(document).removeChild(u),o.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=d(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var getTextRangeContainerElement=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var o=n.parentElement();(n=e.duplicate()).collapse(!1);var a=n.parentElement(),i=o==a?o:r.getCommonAncestor(o,a);return i==t?i:r.getCommonAncestor(t,i)},getTextRangeBoundaryPosition=function(e,t,n,o,a){var s=e.duplicate();s.collapse(n);var c=s.parentElement();if(r.isOrIsAncestorOf(t,c)||(c=t),!c.canHaveHTML){var d=new i(c.parentNode,r.getNodeIndex(c));return{boundaryPosition:d,nodeInfo:{nodeIndex:d.offset,containerElement:d.node}}}var u=r.getDocument(c).createElement("span");u.parentNode&&r.removeNode(u);for(var f,g=n?"StartToStart":"StartToEnd",h=a&&a.containerElement==c?a.nodeIndex:0,p=c.childNodes.length,m=p,R=m;R==p?c.appendChild(u):c.insertBefore(u,c.childNodes[R]),s.moveToElementText(u),0!=(f=s.compareEndPoints(g,e))&&h!=m;){if(-1==f){if(m==h+1)break;h=R}else m=m==h+1?h:R;R=Math.floor((h+m)/2),c.removeChild(u)}if(S=u.nextSibling,-1==f&&S&&l(S)){if(s.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(S.data)){var N,v,C,S,y,E=s.duplicate(),T=E.text.replace(/\r\n/g,"\r").length;for(y=E.moveStart("character",T);-1==(f=E.compareEndPoints("StartToEnd",E));)y++,E.moveStart("character",1)}else y=s.text.length;C=new i(S,y)}else N=(o||!n)&&u.previousSibling,C=(v=(o||n)&&u.nextSibling)&&l(v)?new i(v,0):N&&l(N)?new i(N,N.data.length):new i(c,r.getNodeIndex(u));return r.removeNode(u),{boundaryPosition:C,nodeInfo:{nodeIndex:R,containerElement:c}}},createBoundaryTextRange=function(e,t){var n,o,a,i,s=e.offset,d=r.getDocument(e.node),u=c(d).createTextRange(),f=l(e.node);return f?o=(n=e.node).parentNode:(n=s<(i=e.node.childNodes).length?i[s]:null,o=e.node),(a=d.createElement("span")).innerHTML="&#feff;",n?o.insertBefore(a,n):o.appendChild(a),u.moveToElementText(a),u.collapse(!t),o.removeChild(a),f&&u[t?"moveStart":"moveEnd"]("character",s),u};(o=function(e){this.textRange=e,this.refresh()}).prototype=new s(document),o.prototype.refresh=function(){var e,t,n,o,r=getTextRangeContainerElement(this.textRange);0==(e=this.textRange).compareEndPoints("StartToEnd",e)?n=t=getTextRangeBoundaryPosition(this.textRange,r,!0,!0).boundaryPosition:(t=(o=getTextRangeBoundaryPosition(this.textRange,r,!0,!1)).boundaryPosition,n=getTextRangeBoundaryPosition(this.textRange,r,!1,!1,o.nodeInfo).boundaryPosition),this.setStart(t.node,t.offset),this.setEnd(n.node,n.offset)},o.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(o);var rangeToTextRange=function(e){if(e.collapsed)return createBoundaryTextRange(new i(e.startContainer,e.startOffset),!0);var t=createBoundaryTextRange(new i(e.startContainer,e.startOffset),!0),n=createBoundaryTextRange(new i(e.endContainer,e.endOffset),!1),o=c(s.getRangeDocument(e)).createTextRange();return o.setEndPoint("StartToStart",t),o.setEndPoint("EndToEnd",n),o};if(o.rangeToTextRange=rangeToTextRange,o.prototype.toTextRange=function(){return rangeToTextRange(this)},e.WrappedTextRange=o,!e.features.implementsDomRange||e.config.preferTextRange){var u=Function("return this;")();void 0===u.Range&&(u.Range=o),e.createNativeRange=function(e){return c(e=d(e,t,"createNativeRange")).createTextRange()},e.WrappedRange=o}}e.createRange=function(n){return n=d(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return new s(e=d(e,t,"createRangyRange"))},a.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),a.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),p.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){e.config.checkSelectionRanges=!0;var n,o,r,a="boolean",i="number",s=e.dom,c=e.util,d=c.isHostMethod,l=e.DomRange,u=e.WrappedRange,f=e.DOMException,g=s.DomPosition,h=e.features,p="Control",m=s.getDocument,R=s.getBody,N=l.rangesEqual;function isDirectionBackward(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function getWindow(e,n){if(!e)return window;if(s.isWindow(e))return e;if(e instanceof WrappedSelection)return e.win;var o=s.getContentDocument(e,t,n);return s.getWindow(o)}function getWinSelection(e){return getWindow(e,"getWinSelection").getSelection()}function getDocSelection(e){return getWindow(e,"getDocSelection").document.selection}function winSelectionIsBackward(e){var t=!1;return e.anchorNode&&(t=1==s.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var v=d(window,"getSelection"),C=c.isHostObject(document,"selection");h.implementsWinGetSelection=v,h.implementsDocSelection=C;var S=C&&(!v||e.config.preferTextRange);if(S)I=getDocSelection,e.isSelectionValid=function(e){var t=getWindow(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||m(n.createRange().parentElement())==t};else{if(!v)return t.fail("Neither document.selection or window.getSelection() detected."),!1;I=getWinSelection,e.isSelectionValid=function(){return!0}}e.getNativeSelection=I;var y=I();if(!y)return t.fail("Native selection was null (possibly issue 138?)"),!1;var E=e.createNativeRange(document),T=R(document),O=c.areHostProperties(y,["anchorNode","focusNode","anchorOffset","focusOffset"]);h.selectionHasAnchorAndFocus=O;var w=d(y,"extend");h.selectionHasExtend=w;var D=d(y,"setBaseAndExtent");h.selectionHasSetBaseAndExtent=D;var A=typeof y.rangeCount==i;h.selectionHasRangeCount=A;var x=!1,_=!0,P=w?function(t,n){var o=l.getRangeDocument(n),r=e.createRange(o);r.collapseToPoint(n.endContainer,n.endOffset),t.addRange(getNativeRange(r)),t.extend(n.startContainer,n.startOffset)}:null;c.areHostMethods(y,["addRange","getRangeAt","removeAllRanges"])&&typeof y.rangeCount==i&&h.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,o=[],r=winSelectionIsBackward(t),a=0;a<n;++a)o[a]=t.getRangeAt(a);var i=s.createTestElement(document,"",!1),c=i.appendChild(document.createTextNode("\xa0\xa0\xa0")),d=document.createRange();if(d.setStart(c,1),d.collapse(!0),t.removeAllRanges(),t.addRange(d),_=1==t.rangeCount,t.removeAllRanges(),!(n>1)){var l=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(l&&parseInt(l[1])>=36)x=!1;else{var u=d.cloneRange();d.setStart(c,0),u.setEnd(c,3),u.setStart(c,2),t.addRange(d),t.addRange(u),x=2==t.rangeCount}}for(s.removeNode(i),t.removeAllRanges(),a=0;a<n;++a)0==a&&r?P?P(t,o[a]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(o[a])):t.addRange(o[a])}}(),h.selectionSupportsMultipleRanges=x,h.collapsedNonEditableSelectionsSupported=_;var I,B,b,M=!1;function updateAnchorAndFocusFromRange(e,t,n){var o=n?"end":"start",r=n?"start":"end";e.anchorNode=t[o+"Container"],e.anchorOffset=t[o+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function updateAnchorAndFocusFromNativeSelection(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function updateEmptySelection(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0,updateType(e)}function updateType(e){e.type=0==e.rangeCount?"None":B(e)?"Caret":"Range"}function getNativeRange(t){var n;return t instanceof l?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof u?n=t.nativeRange:h.implementsDomRange&&t instanceof s.getWindow(t.startContainer).Range&&(n=t),n}function rangeContainsSingleElement(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!s.isAncestorOf(e[0],e[t]))return!1;return!0}function getSingleElementFromRange(e){var n=e.getNodes();if(!rangeContainsSingleElement(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function isTextRange(e){return!!e&&void 0!==e.text}function updateFromTextRange(e,t){var n=new u(t);e._ranges=[n],updateAnchorAndFocusFromRange(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed,updateType(e)}function updateControlSelection(t){if(t._ranges.length=0,"None"==t.docSelection.type)updateEmptySelection(t);else{var n=t.docSelection.createRange();if(isTextRange(n))updateFromTextRange(t,n);else{t.rangeCount=n.length;for(var o,r=m(n.item(0)),a=0;a<t.rangeCount;++a)(o=e.createRange(r)).selectNode(n.item(a)),t._ranges.push(o);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,updateAnchorAndFocusFromRange(t,t._ranges[t.rangeCount-1],!1),updateType(t)}}}function addRangeToControlSelection(e,n){for(var o=e.docSelection.createRange(),r=getSingleElementFromRange(n),a=R(m(o.item(0))).createControlRange(),i=0,s=o.length;i<s;++i)a.add(o.item(i));try{a.add(r)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),updateControlSelection(e)}function WrappedSelection(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function deleteProperties(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0,updateType(e)}T&&d(T,"createControlRange")&&(b=T.createControlRange(),c.areHostProperties(b,["item","add"])&&(M=!0)),h.implementsControlRange=M,B=O?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},d(y,"getRangeAt")?n=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:O&&(n=function(t){var n=m(t.anchorNode),o=e.createRange(n);return o.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),o.collapsed!==this.isCollapsed&&o.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),o}),WrappedSelection.prototype=e.selectionPrototype;var H=[];function actOnCachedSelection(e,t){for(var n,o,r=H.length;r--;)if(o=(n=H[r]).selection,"deleteAll"==t)deleteProperties(o);else if(n.win==e){if("delete"==t)return H.splice(r,1),!0;return o}return"deleteAll"==t&&(H.length=0),null}var getSelection=function(e){if(e&&e instanceof WrappedSelection)return e.refresh(),e;var t=actOnCachedSelection(e=getWindow(e,"getNativeSelection")),n=I(e),o=C?getDocSelection(e):null;return t?(t.nativeSelection=n,t.docSelection=o,t.refresh()):(t=new WrappedSelection(n,o,e),H.push({win:e,selection:t})),t};e.getSelection=getSelection,c.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var W=WrappedSelection.prototype;function createControlSelection(e,n){for(var o,r=R(m(n[0].startContainer)).createControlRange(),a=0,i=n.length;a<i;++a){o=getSingleElementFromRange(n[a]);try{r.add(o)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}r.select(),updateControlSelection(e)}if(!S&&O&&c.areHostMethods(y,["removeAllRanges","addRange"])){W.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),updateEmptySelection(this)};var addRangeBackward=function(e,t){P(e.nativeSelection,t),e.refresh()};A?W.addRange=function(t,o){if(M&&C&&this.docSelection.type==p)addRangeToControlSelection(this,t);else if(isDirectionBackward(o)&&w)addRangeBackward(this,t);else{x?a=this.rangeCount:(this.removeAllRanges(),a=0);var a,i=getNativeRange(t).cloneRange();try{this.nativeSelection.addRange(i)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==a+1){if(e.config.checkSelectionRanges){var s=n(this.nativeSelection,this.rangeCount-1);s&&!N(s,t)&&(t=new u(s))}this._ranges[this.rangeCount-1]=t,updateAnchorAndFocusFromRange(this,t,r(this.nativeSelection)),this.isCollapsed=B(this),updateType(this)}else this.refresh()}}:W.addRange=function(e,t){isDirectionBackward(t)&&w?addRangeBackward(this,e):(this.nativeSelection.addRange(getNativeRange(e)),this.refresh())},W.setRanges=function(e){if(M&&C&&e.length>1)createControlSelection(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])}}}else{if(!(d(y,"empty")&&d(E,"select"))||!M||!S)return t.fail("No means of selecting a Range or TextRange was found"),!1;W.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=m(this.anchorNode);else if(this.docSelection.type==p){var t=this.docSelection.createRange();t.length&&(e=m(t.item(0)))}e&&(R(e).createTextRange().select(),this.docSelection.empty())}}catch(e){}updateEmptySelection(this)},W.addRange=function(t){this.docSelection.type==p?addRangeToControlSelection(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,updateAnchorAndFocusFromRange(this,t,!1),updateType(this))},W.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?createControlSelection(this,e):t&&this.addRange(e[0])}}if(W.getRangeAt=function(e){if(!(e<0)&&!(e>=this.rangeCount))return this._ranges[e].cloneRange();throw new f("INDEX_SIZE_ERR")},S)o=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=R(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==p?updateControlSelection(t):isTextRange(n)?updateFromTextRange(t,n):updateEmptySelection(t)};else if(d(y,"getRangeAt")&&typeof y.rangeCount==i)o=function(t){if(M&&C&&t.docSelection.type==p)updateControlSelection(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,o=t.rangeCount;n<o;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));updateAnchorAndFocusFromRange(t,t._ranges[t.rangeCount-1],r(t.nativeSelection)),t.isCollapsed=B(t),updateType(t)}else updateEmptySelection(t)};else{if(!O||typeof y.isCollapsed!=a||typeof E.collapsed!=a||!h.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;o=function(e){var t,o=e.nativeSelection;o.anchorNode?(t=n(o,0),e._ranges=[t],e.rangeCount=1,updateAnchorAndFocusFromNativeSelection(e),e.isCollapsed=B(e),updateType(e)):updateEmptySelection(e)}}W.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(o(this),e){var a=t.length;if(a!=this._ranges.length||this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;a--;)if(!N(t[a],this._ranges[a]))return!0;return!1}};var removeRangeManually=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var o=0,r=n.length;o<r;++o)N(t,n[o])||e.addRange(n[o]);e.rangeCount||updateEmptySelection(e)};function assertNodeInSameDocument(e,t){if(e.win.document!=m(t))throw new f("WRONG_DOCUMENT_ERR")}function assertValidOffset(e,t){if(t<0||t>(s.isCharacterDataNode(e)?e.length:e.childNodes.length))throw new f("INDEX_SIZE_ERR")}function createStartOrEndSetter(t){return function(n,o){var r;this.rangeCount?(r=this.getRangeAt(0))["set"+(t?"Start":"End")](n,o):(r=e.createRange(this.win.document)).setStartAndEnd(n,o),this.setSingleRange(r,this.isBackward())}}function inspect(e){var t=[],n=new g(e.anchorNode,e.anchorOffset),o=new g(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var a=0,i=e.rangeCount;a<i;++a)t[a]=l.inspect(e.getRangeAt(a));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"}M&&C?W.removeRange=function(e){if(this.docSelection.type==p){for(var t=this.docSelection.createRange(),n=getSingleElementFromRange(e),o=R(m(t.item(0))).createControlRange(),r=!1,a=0,i=t.length;a<i;++a)t.item(a)!==n||r?o.add(t.item(a)):r=!0;o.select(),updateControlSelection(this)}else removeRangeManually(this,e)}:W.removeRange=function(e){removeRangeManually(this,e)},!S&&O&&h.implementsDomRange?(r=winSelectionIsBackward,W.isBackward=function(){return r(this)}):r=W.isBackward=function(){return!1},W.isBackwards=W.isBackward,W.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},W.collapse=function(t,n){assertNodeInSameDocument(this,t);var o=e.createRange(t);o.collapseToPoint(t,n),this.setSingleRange(o),this.isCollapsed=!0},W.collapseToStart=function(){if(this.rangeCount){var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)}else throw new f("INVALID_STATE_ERR")},W.collapseToEnd=function(){if(this.rangeCount){var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)}else throw new f("INVALID_STATE_ERR")},W.selectAllChildren=function(t){assertNodeInSameDocument(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},D?W.setBaseAndExtent=function(e,t,n,o){this.nativeSelection.setBaseAndExtent(e,t,n,o),this.refresh()}:w&&(W.setBaseAndExtent=function(t,n,o,r){assertValidOffset(t,n),assertValidOffset(o,r),assertNodeInSameDocument(this,t),assertNodeInSameDocument(this,o);var a=e.createRange(node),i=-1==s.comparePoints(t,n,o,r);i?a.setStartAndEnd(o,r,t,n):a.setStartAndEnd(t,n,o,r),this.setSingleRange(a,i)}),W.deleteFromDocument=function(){if(M&&C&&this.docSelection.type==p){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),s.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var o=0,r=n.length;o<r;++o)n[o].deleteContents();this.addRange(n[r-1])}}},W.eachRange=function(e,t){for(var n=0,o=this._ranges.length;n<o;++n)if(e(this.getRangeAt(n)))return t},W.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},W.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},W.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(o){n.push(o[e].apply(o,t||[]))}),n},W.setStart=createStartOrEndSetter(!0),W.setEnd=createStartOrEndSetter(!1),e.rangePrototype.select=function(e){getSelection(this.getDocument()).setSingleRange(this,e)},W.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},W.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},W.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},W.moveToBookmark=function(t){for(var n,o,r=[],a=0;n=t.rangeBookmarks[a++];)(o=e.createRange(this.win)).moveToBookmark(n),r.push(o);t.backward?this.setSingleRange(r[0],"backward"):this.setRanges(r)},W.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},W.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},W.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(l.toHtml(t))}),e.join("")},h.implementsTextRange&&(W.getNativeTextRange=function(){var n;if(n=this.docSelection){var o=n.createRange();if(isTextRange(o))return o;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),W.getName=function(){return"WrappedSelection"},W.inspect=function(){return inspect(this)},W.detach=function(){actOnCachedSelection(this.win,"delete"),deleteProperties(this)},WrappedSelection.detachAll=function(){actOnCachedSelection(null,"deleteAll")},WrappedSelection.inspect=inspect,WrappedSelection.isDirectionBackward=isDirectionBackward,e.Selection=WrappedSelection,e.selectionPrototype=W,e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return getSelection(e)}),e=null})});var N=!1,loadHandler=function(e){N||(N=!0,!p.initialized&&p.config.autoInitialize&&init())};return g&&("complete"==document.readyState?loadHandler():(isHostMethod(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",loadHandler,!1),t(window,"load",loadHandler))),p})?o.call(t,n,t,e):o)&&(e.exports=r)}}]);